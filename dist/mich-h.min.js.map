{"version":3,"file":"mich-h.min.js","sources":["../index.js","../node_modules/mich-parse-selector/index.js"],"sourcesContent":["/*!\n * mich-h <https://github.com/tunnckoCore/mich-h>\n *\n * Copyright (c) Charlike Mike Reagent <@tunnckoCore> (https://i.am.charlike.online)\n * Released under the MIT license.\n */\n\n'use strict'\n\nvar parseSelector = require('mich-parse-selector')\n\nmodule.exports = function michH (selector, properties, children) {\n  var component = typeof selector === 'function'\n  var node = component ? parseSelector() : parseSelector(selector)\n\n  var args = [].slice.call(arguments, 1)\n\n  function item (arg) {\n    if (Array.isArray(arg)) {\n      arg.forEach(function (val) {\n        addChild(node.children, val)\n      })\n    } else if (arg && typeof arg === 'object' && !('type' in arg)) {\n      for (var prop in arg) {\n        addProperty(node.properties, prop, arg[prop])\n      }\n    } else {\n      addChild(node.children, arg)\n    }\n  }\n\n  while (args.length) {\n    item(args.shift())\n  }\n\n  return component ? selector(node.properties, node.children) : node\n}\n\nfunction addChild (nodes, children) {\n  var type = typeof children\n  if (type === 'string' || type === 'number') {\n    children = {\n      type: 'text',\n      value: String(children)\n    }\n  }\n  nodes.push(children)\n}\n\nfunction arrayify (val) {\n  return !val ? [] : (Array.isArray(val) ? val : [val])\n}\n\nfunction addProperty (props, key, value) {\n  if (key === 'style' && value && typeof value === 'object') {\n    for (var prop in value) {\n      props.style[prop] = value[prop]\n    }\n  }\n  if (key === 'className') {\n    value = typeof value === 'string' ? value.split(' ') : value\n    props[key] = arrayify(props[key]).concat(value)\n  } else {\n    props[key] = value\n  }\n}\n","/*!\n * mich-parse-selector <https://github.com/tunnckoCore/mich-parse-selector>\n *\n * Copyright (c) Charlike Mike Reagent <@tunnckoCore> (https://i.am.charlike.online)\n * Copyright (c) Titus Wormer <tituswormer@gmail.com> (http://wooorm.com)\n * Released under the MIT license.\n */\n\n/**\n * > Parse a simple CSS selector like `p.foo#hero.btn-large.btn` into\n * a [HAST](https://github.com/syntax-tree/hast) node, which is a specification\n * for the Html (or Hypertext) Abstract Syntax Tree.\n * If \"tag name\" is omitted it defaults to `div`.\n *\n * **Example**\n *\n * ```js\n * const parseSelector = require('mich-parse-selector')\n *\n * const divNode = parseSelector('.bar')\n * const node = parseSelector('p.foo#hero.btn-large.btn')\n *\n * console.log(divNode)\n * // => {\n * //  type: 'element',\n * //  tagName: 'div',\n * //  properties: { className: [ 'bar' ] },\n * //  children: []\n * // }\n *\n * console.log(node)\n * // => {\n * //  type: 'element',\n * //  tagName: 'p',\n * //  properties: { id: 'hero', className: [ 'foo', 'btn-large', 'btn' ] },\n * //  children: []\n * // }\n * ```\n *\n * @name   michParseSelector\n * @param  {String} `selector` a css selector\n * @return {Object} a [HAST](https://github.com/syntax-tree/hast)-compliant node object\n * @api public\n */\n\nmodule.exports = function parse (selector) {\n  var type\n  var lastIndex\n\n  var index = 0\n  var className = []\n\n  var node = {\n    type: 'element',\n    tagName: 'div',\n    properties: {},\n    children: []\n  }\n\n  selector = selector || ''\n\n  while (index <= selector.length) {\n    var ch = selector[index++]\n\n    if (!ch || ch === '.' || ch === '#') {\n      var value = selector.slice(lastIndex, index - 1)\n\n      if (value) {\n        if (type === '.') {\n          className.push(value)\n        } else if (type === '#') {\n          node.properties.id = value\n        } else {\n          node.tagName = value\n        }\n      }\n\n      lastIndex = index\n      type = ch\n    }\n  }\n\n  if (className.length) {\n    node.properties.className = className\n  }\n\n  return node\n}\n"],"names":["addChild","nodes","children","type","value","String","push","arrayify","val","Array","isArray","addProperty","props","key","prop","style","split","concat","selector","lastIndex","index","className","node","tagName","properties","length","ch","slice","id","parseSelector","require$$0","item","arg","forEach","component","args","call","arguments","shift"],"mappings":"oKAsCA,QAASA,GAAUC,EAAOC,GACxB,GAAIC,SAAcD,EACL,YAATC,GAA8B,WAATA,IACvBD,GACEC,KAAM,OACNC,MAAOC,OAAOH,KAGlBD,EAAMK,KAAKJ,GAGb,QAASK,GAAUC,GACjB,MAAQA,GAAYC,MAAMC,QAAQF,GAAOA,GAAOA,MAGlD,QAASG,GAAaC,EAAOC,EAAKT,GAChC,GAAY,UAARS,GAAmBT,GAA0B,gBAAVA,GACrC,IAAK,GAAIU,KAAQV,GACfQ,EAAMG,MAAMD,GAAQV,EAAMU,EAGlB,eAARD,GACFT,EAAyB,gBAAVA,GAAqBA,EAAMY,MAAM,KAAOZ,EACvDQ,EAAMC,GAAON,EAASK,EAAMC,IAAMI,OAAOb,IAEzCQ,EAAMC,GAAOT,EClBjB,MAAiB,SAAgBc,GAC/B,GAAIf,GACAgB,EAEAC,EAAQ,EACRC,KAEAC,GACFnB,KAAM,UACNoB,QAAS,MACTC,cACAtB,YAKF,KAFAgB,EAAWA,GAAY,GAEhBE,GAASF,EAASO,QAAQ,CAC/B,GAAIC,GAAKR,EAASE,IAElB,KAAKM,GAAa,MAAPA,GAAqB,MAAPA,EAAY,CACnC,GAAItB,GAAQc,EAASS,MAAMR,EAAWC,EAAQ,EAE1ChB,KACW,MAATD,EACFkB,EAAUf,KAAKF,GACG,MAATD,EACTmB,EAAKE,WAAWI,GAAKxB,EAErBkB,EAAKC,QAAUnB,GAInBe,EAAYC,EACZjB,EAAOuB,GAQX,MAJIL,GAAUI,SACZH,EAAKE,WAAWH,UAAYA,GAGvBC,GD7ELO,EAAgBC,IAEH,SAAgBZ,EAAUM,EAAYtB,GAMrD,QAAS6B,GAAMC,GACb,GAAIvB,MAAMC,QAAQsB,GAChBA,EAAIC,QAAQ,SAAUzB,GACpBR,EAASsB,EAAKpB,SAAUM,SAErB,KAAIwB,GAAsB,gBAARA,IAAsB,QAAUA,GAKvDhC,EAASsB,EAAKpB,SAAU8B,OAJxB,KAAK,GAAIlB,KAAQkB,GACfrB,EAAYW,EAAKE,WAAYV,EAAMkB,EAAIlB,IAO7C,IAnBA,GAAIoB,GAAgC,kBAAbhB,GACnBI,EAAOY,EAAYL,IAAkBA,EAAcX,GAEnDiB,KAAUR,MAAMS,KAAKC,UAAW,GAgB7BF,EAAKV,QACVM,EAAKI,EAAKG,QAGZ,OAAOJ,GAAYhB,EAASI,EAAKE,WAAYF,EAAKpB,UAAYoB"}